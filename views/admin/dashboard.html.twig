{% extends "layout.html.twig" %}

{% block title %}Administration - SnapFit{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="row">
        <!-- Sidebar simplifiée -->
        <nav class="col-md-2 d-none d-md-block bg-light sidebar p-3 rounded">
            <h5 class="text-primary">Admin Panel</h5>
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active fw-bold" href="#">
                        <i class="fas fa-users"></i> Utilisateurs
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-muted" href="#">
                        <i class="fas fa-tshirt"></i> Articles (Bientôt)
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Contenu -->
        <main class="col-md-10">
            <h2 class="mb-4">Gestion des Utilisateurs</h2>
            
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="table-responsive">
                        <table id="usersTable" class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Login</th>
                                    <th>Email</th>
                                    <th>Nom Complet</th>
                                    <th>Rôle</th>
                                    <th>Inscrit le</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for u in users %}
                                <tr>
                                    <td>{{ u.idUtilisateur }}</td>
                                    <td><strong>{{ u.nomConnexion }}</strong></td>
                                    <td>{{ u.email }}</td>
                                    <td>{{ u.prenom }} {{ u.nom }}</td>
                                    <td>
                                        {% if u.role == 'admin' %}
                                            <span class="badge bg-danger">Admin</span>
                                        {% else %}
                                            <span class="badge bg-info">Membre</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ u.dateInscription|date('d/m/Y') }}</td>
                                    <td>
                                        <button class="btn btn-sm btn-warning"><i class="fas fa-edit"></i></button>
                                        <button class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- DataTables CSS & JS (Direct Link for MVP) -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css">
{% endblock %}

{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>
<script>
    $(document).ready(function () {
        $('#usersTable').DataTable({
            language: {
                url: "//cdn.datatables.net/plug-ins/1.13.4/i18n/fr-FR.json"
            }
        });
    });
</script>
{% endblock %}
